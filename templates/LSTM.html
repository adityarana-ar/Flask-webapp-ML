{% extends "base.html" %}

{% block title %}LSTM Stock Prediction · Aditya Rana{% endblock %}

{% block content %}
<div class="space-y-6">
  <!-- Header Section -->
  <div class="text-center space-y-4">
    <h1 class="text-3xl font-bold text-gray-900 dark:text-white">LSTM Stock Prediction</h1>
    <p class="text-lg text-gray-600 dark:text-gray-300">Predict stock prices using Long Short-Term Memory networks</p>
  </div>

  <!-- Description Section -->
  <div class="rounded-xl border border-gray-200 bg-white p-6 shadow-sm dark:border-gray-800 dark:bg-gray-900">
    <h2 class="text-xl font-semibold mb-4">About This Project</h2>
    <div class="space-y-3 text-gray-600 dark:text-gray-300">
      <p>This project uses Long Short-Term Memory networks (LSTM) Deep Learning model to predict the closing prices of stock prices as they are capable of learning long-term dependencies.</p>
      <p>LSTM models are useful for sequence prediction problems where past information and the latest prior information both dictate the successive data.</p>
      <p>The dataframe to train the model is provided by <a href="https://pypi.org/project/yfinance/" target="_blank" class="text-indigo-600 hover:text-indigo-500 dark:text-indigo-400 dark:hover:text-indigo-300 underline">yfinance</a>. To train the model, variables such as moving averages of different periods as well as exponential moving averages were used.</p>
    </div>
  </div>

  <!-- Disclaimer Section -->
  <div class="rounded-xl border border-amber-200 bg-amber-50 p-6 shadow-sm dark:border-amber-800 dark:bg-amber-900/20">
    <h2 class="text-xl font-semibold mb-4 text-amber-800 dark:text-amber-200">⚠️ Important Disclaimer</h2>
    <div class="space-y-3 text-sm text-amber-700 dark:text-amber-300">
	    <p><strong>Experimental Predictions:</strong> These LSTM predictions are experimental and still <b>under development</b>. While the overall trends (increasing or decreasing price directions) may be reasonably accurate, the exact price predictions should not be considered precise.</p>
      <p><strong>Not Financial Advice:</strong> This tool is for educational and research purposes only. The predictions generated are NOT financial advice and should not be used as the sole basis for any investment decisions. Always consult with qualified financial professionals before making investment decisions.</p>
      <p><strong>No Liability:</strong> By using this tool, you acknowledge that the predictions are experimental and agree that no liability is assumed for any financial losses or decisions made based on these predictions.</p>
    </div>
  </div>

  <!-- Form Section -->
  <div class="rounded-xl border border-gray-200 bg-white p-6 shadow-sm dark:border-gray-800 dark:bg-gray-900">
    <h2 class="text-xl font-semibold mb-4">Get Stock Prediction</h2>
    <form method="post" class="space-y-4" id="lstmForm">
      <div>
        <label for="ticker" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
          Enter the stock ticker for prediction:
        </label>
        <input 
          type="text" 
          name="ticker" 
          id="ticker"
          placeholder="e.g., AAPL, MSFT, GOOGL (without the '$' symbol)"
          value="{{ request.form['ticker'] if request.form['ticker'] else '' }}"
          class="w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent dark:border-gray-600 dark:bg-gray-800 dark:text-white"
          required
        >
      </div>
      
      <button 
        type="submit" 
        id="submitBtn"
        class="rounded-md bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900"
      >
        Get Prediction
      </button>
    </form>

    <!-- Flash Messages -->
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <div class="mt-4 space-y-2">
          {% for message in messages %}
            <div class="rounded-md border border-red-500/30 bg-red-500/10 px-4 py-2 text-sm text-red-700 dark:text-red-300">
              {{ message }}
            </div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}
  </div>

  <!-- Notes Section -->
  <div class="rounded-xl border border-gray-200 bg-white p-6 shadow-sm dark:border-gray-800 dark:bg-gray-900">
    <h2 class="text-xl font-semibold mb-4">Important Notes</h2>
    <div class="space-y-2 text-sm text-gray-600 dark:text-gray-300">
      <p>• The caching of the images works best in Chrome from my experience. If old plots are shown, kindly try clearing cache.</p>
      <p>• <strong>Processing time:</strong> LSTM model training can take 2-5 minutes. Please be patient and don't close the browser.</p>
      <p>• This is a legacy feature. For comprehensive S&P 500 forecasts, visit the <a href="{{ url_for('sp500_forecasts') }}" class="text-indigo-600 hover:text-indigo-500 dark:text-indigo-400 dark:hover:text-indigo-300 underline">S&P 500 Forecasts</a> page.</p>
    </div>
  </div>

  
</div>


{% endblock %}

{% block scripts %}
<script>
// Form submission is now handled by redirecting to the progress page
// The progress page will handle the actual processing with real-time updates
</script>
{% endblock %}
