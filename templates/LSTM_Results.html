{% extends "base.html" %}

{% block title %}LSTM Prediction Results Â· Aditya Rana{% endblock %}

{% block head %}
<meta http-equiv='cache-control' content='no-cache'>
<meta http-equiv='expires' content='0'>
<meta http-equiv='pragma' content='no-cache'>
{% endblock %}

{% block content %}
<div class="space-y-6">
  <!-- Header Section -->
  <div class="text-center space-y-4">
    <h1 class="text-3xl font-bold text-gray-900 dark:text-white">LSTM Prediction Results</h1>
    <p class="text-lg text-gray-600 dark:text-gray-300">Stock price predictions for {{ ticker }}</p>
  </div>

  <!-- Results Section -->
  <div class="rounded-xl border border-gray-200 bg-white p-6 shadow-sm dark:border-gray-800 dark:bg-gray-900">
    <h2 class="text-xl font-semibold mb-4">Prediction Results</h2>
    <p class="text-gray-600 dark:text-gray-300 mb-6">You entered the ticker: <span class="font-semibold text-gray-900 dark:text-white">{{ ticker }}</span></p>
    
    <div class="space-y-6">
      {% if img1 %}
      <div class="text-center">
        <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-3">Price Prediction Chart</h3>
        <img src="{{ img1 }}" alt="Price Prediction Chart" class="mx-auto max-w-full h-auto rounded-lg shadow-md">
      </div>
      {% endif %}
      
      {% if img2 %}
      <div class="text-center">
        <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-3">Technical Analysis Chart</h3>
        <img src="{{ img2 }}" alt="Technical Analysis Chart" class="mx-auto max-w-full h-auto rounded-lg shadow-md">
      </div>
      {% endif %}
    </div>
  </div>

  <!-- Navigation Section -->
  <div class="rounded-xl border border-gray-200 bg-white p-6 shadow-sm dark:border-gray-800 dark:bg-gray-900">
    <h2 class="text-xl font-semibold mb-4">What's Next?</h2>
    <div class="grid gap-4 sm:grid-cols-2">
      <a href="{{ url_for('LSTM') }}" 
         class="group rounded-lg border border-gray-200 p-4 transition-all hover:border-indigo-500 hover:bg-indigo-50 dark:border-gray-700 dark:hover:border-indigo-400 dark:hover:bg-indigo-900/20">
        <h3 class="font-semibold text-gray-900 dark:text-white group-hover:text-indigo-600 dark:group-hover:text-indigo-400">Try Another Stock</h3>
        <p class="text-sm text-gray-500 dark:text-gray-400">Get predictions for a different stock ticker</p>
      </a>
      
      <a href="{{ url_for('sp500_forecasts') }}" 
         class="group rounded-lg border border-gray-200 p-4 transition-all hover:border-indigo-500 hover:bg-indigo-50 dark:border-gray-700 dark:hover:border-indigo-400 dark:hover:bg-indigo-900/20">
        <h3 class="font-semibold text-gray-900 dark:text-white group-hover:text-indigo-600 dark:group-hover:text-indigo-400">S&P 500 Forecasts</h3>
        <p class="text-sm text-gray-500 dark:text-gray-400">View comprehensive forecasts for all S&P 500 stocks</p>
      </a>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
  // Force image refresh to prevent caching issues
  document.addEventListener('DOMContentLoaded', function() {
    const images = document.querySelectorAll('img');
    images.forEach(function(img) {
      img.src = img.src + '?' + new Date().getTime();
    });
  });
</script>
{% endblock %}